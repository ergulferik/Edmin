import{a as j}from"./chunk-4GBD25LU.js";import{b as H}from"./chunk-EEMBQGBN.js";import{Ab as x,Bb as m,Gc as A,Hc as T,Nc as N,Oa as s,Oc as F,Pb as r,Qb as u,Qc as V,Rb as g,Sb as _,Tb as M,Ub as D,Vb as R,_a as O,a as I,b as P,db as p,fc as S,fd as k,gc as E,ja as v,jd as $,oa as h,pa as C,pc as b,qd as B,rb as o,rd as W,sb as n,sd as L,tb as t,ub as y,wd as z,yb as w}from"./chunk-C35VUVUC.js";function U(i,a){if(i&1&&(n(0,"div")(1,"strong"),r(2,"Name:"),t(),r(3),t()),i&2){let e=a.$implicit;s(3),_(" ",e.name," ",e.surname," ")}}function q(i,a){if(i&1&&(n(0,"div"),p(1,U,4,2,"div",6),t()),i&2){let e=m();s(),o("ngForOf",e.students)}}function G(i,a){if(i&1&&(n(0,"option",7),r(1),t()),i&2){let e=a.$implicit;o("value",e.id),s(),_("",e.name," ",e.surname)}}function J(i,a){if(i&1&&(n(0,"option",7),r(1),S(2,"async"),S(3,"date"),t()),i&2){let e=a.$implicit,l=m();o("value",e.id),s(),_(" ",E(2,3,l.getExamName(e.examId))," (",E(3,5,e.uploadedAt),") ")}}function K(i,a){if(i&1&&(n(0,"tr")(1,"td"),r(2),t(),n(3,"td"),r(4),t(),n(5,"td"),r(6),t(),n(7,"td"),r(8),t()()),i&2){let e=a.$implicit;s(2),u(e.courseId),s(2),u(e.correctCount),s(2),u(e.wrongCount),s(2),u(e.netScore)}}function X(i,a){if(i&1&&(n(0,"span"),r(1),t()),i&2){let e=m().$implicit;s(),u(e.selectedOption)}}function Y(i,a){if(i&1){let e=w();n(0,"input",10),x("change",function(d){h(e);let c=m().index,f=m(2);return C(f.onAnswerChange(c,d))}),t()}if(i&2){let e=m().$implicit;o("value",e.selectedOption)}}function Z(i,a){if(i&1&&(n(0,"li")(1,"span"),r(2),t(),p(3,X,2,1,"span",1)(4,Y,1,1,"input",9),n(5,"span"),r(6),t()()),i&2){let e=a.$implicit,l=a.index,d=m(2);s(2),g("Question ",l+1,": "),s(),o("ngIf",!d.isEditingAnswers),s(),o("ngIf",d.isEditingAnswers),s(2),g(" (Correct: ",e.correctOption,")")}}function ee(i,a){if(i&1){let e=w();n(0,"div")(1,"h3"),r(2,"Exam Details"),t(),n(3,"table")(4,"thead")(5,"tr")(6,"th"),r(7,"Course"),t(),n(8,"th"),r(9,"Correct"),t(),n(10,"th"),r(11,"Wrong"),t(),n(12,"th"),r(13,"Net"),t()()(),n(14,"tbody"),p(15,K,9,4,"tr",6),t()(),n(16,"div")(17,"strong"),r(18,"Total Score:"),t(),r(19),y(20,"br"),n(21,"strong"),r(22,"Total Net:"),t(),r(23),t(),n(24,"div")(25,"h4"),r(26,"Answers"),t(),n(27,"button",8),x("click",function(){h(e);let d=m();return C(d.toggleAnswerEditing())}),r(28),t(),n(29,"ul"),p(30,Z,7,4,"li",6),t()()()}if(i&2){let e=m();s(15),o("ngForOf",e.selectedExamResult.statistics),s(4),g(" ",e.selectedExamResult.totalScore),s(4),g(" ",e.selectedExamResult.totalNet," "),s(5),u(e.isEditingAnswers?"Finish Editing":"Edit Answers"),s(2),o("ngForOf",e.selectedExamResult.answers)}}var Q=class i{examService=v(j);classService=v(H);selectedStudentId="1";selectedExamResult=null;isEditingAnswers=!1;students;constructor(){b(()=>{this.students=this.classService.students()})}getStudentExamResults(a){return this.examService.getStudentExamResults().then(e=>e.filter(l=>l.studentId===a))}getExamName(a){return this.examService.getExams().then(e=>e.find(l=>l.id===a)?.name||"Unknown Exam")}onExamResultChange(a){let l=a.target.value;l&&this.getStudentExamResults(this.selectedStudentId).then(d=>{let c=d.find(f=>f.id===l);c&&(this.selectedExamResult=c)})}onAnswerChange(a,e){let d=e.target.value;this.updateAnswer(a,d)}updateAnswer(a,e){if(this.selectedExamResult){let l=[...this.selectedExamResult.answers];l[a]=P(I({},l[a]),{selectedOption:e,isCorrect:e===l[a].correctOption}),this.examService.updateStudentExamResult(this.selectedExamResult.id,{answers:l}).then(d=>this.selectedExamResult=d)}}toggleAnswerEditing(){this.isEditingAnswers=!this.isEditingAnswers}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=O({type:i,selectors:[["app-student-detail"]],decls:18,vars:7,consts:[[1,"student-detail-container"],[4,"ngIf"],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"change"],["value",""],[4,"ngFor","ngForOf"],[3,"value"],[3,"click"],["maxlength","1","size","1",3,"value","change",4,"ngIf"],["maxlength","1","size","1",3,"change","value"]],template:function(e,l){e&1&&(n(0,"div",0)(1,"h2"),r(2,"Student Detail"),t(),p(3,q,2,1,"div",1),n(4,"div")(5,"label"),r(6,"Student Selection: "),n(7,"select",2),R("ngModelChange",function(c){return D(l.selectedStudentId,c)||(l.selectedStudentId=c),c}),p(8,G,2,3,"option",3),t()()(),n(9,"div")(10,"label"),r(11,"Exam Result Selection: "),n(12,"select",4),x("change",function(c){return l.onExamResultChange(c)}),n(13,"option",5),r(14,"Select exam result"),t(),p(15,J,4,7,"option",3),S(16,"async"),t()()(),p(17,ee,31,5,"div",1),t()),e&2&&(s(3),o("ngIf",l.students),s(4),M("ngModel",l.selectedStudentId),s(),o("ngForOf",l.students),s(7),o("ngForOf",E(16,5,l.getStudentExamResults(l.selectedStudentId))),s(2),o("ngIf",l.selectedExamResult))},dependencies:[V,A,T,N,F,z,W,L,B,k,$],styles:[".student-detail-container[_ngcontent-%COMP%]{padding:24px;background:#fff;border-radius:8px;max-width:700px;margin:32px auto;box-shadow:0 2px 8px #0000000d}.student-detail-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:16px}.student-detail-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:16px}.student-detail-container[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .student-detail-container[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #eee;padding:8px;text-align:center}.student-detail-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:8px 0}"]})};export{Q as StudentDetailPage};
