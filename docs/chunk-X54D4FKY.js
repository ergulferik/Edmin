import{a as le}from"./chunk-SS4FSQ4D.js";import{a as re}from"./chunk-4GBD25LU.js";import{a as pe}from"./chunk-5WLTLWZ3.js";import{a as me}from"./chunk-VIEIPB32.js";import{a as ae}from"./chunk-A45XJCY7.js";import{D as $,G as H,L as K,Ma as ne,Oa as ie,Pa as oe,la as L,ma as R,na as X,pa as Y,qa as J,ra as Q,sa as U,ta as W,ua as Z,va as ee,wa as te}from"./chunk-D5KMJPJG.js";import{Ab as g,Bb as s,Gc as T,Hc as O,Oa as c,Pb as l,Qc as S,Rb as E,Xb as P,_a as w,ad as I,cd as a,db as M,e as ue,f as x,fd as N,gd as k,ja as C,kd as V,ld as B,md as q,nd as z,oa as p,od as A,pa as f,pb as F,pc as y,pd as G,qb as b,rb as d,sb as i,tb as n,ub as u,vd as D,xd as j,yb as h,za as v}from"./chunk-C35VUVUC.js";var ce=ue(pe(),1);var de=(o,t)=>t.id;function fe(o,t){if(o&1){let e=h();i(0,"edmin-exam-template-item",5),g("edit",function(m){p(e);let _=s();return f(_.editTemplate(m))})("delete",function(m){p(e);let _=s();return f(_.deleteTemplate(m))}),n()}if(o&2){let e=t.$implicit;d("template",e)("viewMode","edit")}}function ge(o,t){if(o&1&&(i(0,"mat-option",21),l(1),n()),o&2){let e=t.$implicit,r=s(3);d("value",e.id)("disabled",r.isSelectedCourse(e.id)),c(),E(" ",e.name," ")}}function _e(o,t){if(o&1){let e=h();i(0,"div",18)(1,"mat-form-field",19)(2,"mat-label"),l(3,"Ders"),n(),i(4,"mat-select",20),F(5,ge,2,3,"mat-option",21,de),n()(),i(7,"mat-form-field",19)(8,"mat-label"),l(9,"Soru Say\u0131s\u0131"),n(),u(10,"input",22),n(),i(11,"mat-form-field",19)(12,"mat-label"),l(13,"Katsay\u0131"),n(),u(14,"input",23),n(),i(15,"button",24),g("click",function(){let m=p(e).index,_=s(2);return f(_.removeCourseConfig(m))}),i(16,"mat-icon",25),l(17,"delete"),n()()()}if(o&2){let e=t.index,r=s(2);d("formGroupName",e),c(5),b(r.courses)}}function xe(o,t){if(o&1){let e=h();i(0,"div",6)(1,"div",7)(2,"edmin-modal-header",8),g("onClose",function(){p(e);let m=s();return f(m.closeForm())}),n(),i(3,"form",9),g("ngSubmit",function(){p(e);let m=s();return f(m.saveTemplate())}),i(4,"mat-form-field",10)(5,"mat-label"),l(6,"Ad\u0131"),n(),u(7,"input",11),n(),i(8,"mat-form-field",10)(9,"mat-label"),l(10,"A\xE7\u0131klama"),n(),u(11,"input",12),n(),i(12,"mat-form-field",10)(13,"mat-label"),l(14,"S\xFCr\xFCm"),n(),u(15,"input",13),n(),i(16,"div",14),M(17,_e,18,1,"div",15),i(18,"button",16),g("click",function(){p(e);let m=s();return f(m.addCourseConfig())}),i(19,"mat-icon"),l(20,"add"),n(),l(21," Ders Ekle "),n()()(),u(22,"edmin-modal-footer",17),n()()}if(o&2){let e=s();c(2),d("title",e.editMode?"\u015Eablonu D\xFCzenle":"Yeni \u015Eablon Ekle"),c(),d("formGroup",e.templateForm),c(14),d("ngForOf",e.courseConfigs.controls),c(5),d("buttons",e.footer())}}var se=class o{showForm=!1;editMode=!1;editingId=null;templateForm;courses=[];examTemplates=v([]);footer=v([{title:"Kaydet",disabled:!1,onClick:()=>this.saveTemplate(),type:"submit"},{title:"\u0130ptal",disabled:!1,onClick:()=>this.closeForm(),type:"cancel"}]);examService=C(re);courseService=C(me);fb=C(D);constructor(){y(()=>{this.examTemplates.set(this.examService.examTemplates())}),this.templateForm=this.fb.group({name:["",a.required],description:[""],version:[""],courseConfigs:this.fb.array([])})}ngOnInit(){return x(this,null,function*(){yield this.loadCourses()})}loadCourses(){return x(this,null,function*(){this.courses=yield this.courseService.getCourseList()})}openCreateForm(){this.editMode=!1,this.editingId=null,this.templateForm.reset(),this.courseConfigs.clear(),this.addCourseConfig(),this.showForm=!0}editTemplate(t){this.editMode=!0,this.editingId=t.id,this.templateForm.patchValue({name:t.name,description:t.description,version:t.version}),this.courseConfigs.clear(),t.courseConfigs.forEach(e=>{this.courseConfigs.push(this.fb.group({courseId:[e.courseId,a.required],questionCount:[e.questionCount,[a.required,a.min(1)]],weight:[e.weight,[a.required,a.min(.01)]]}))}),this.showForm=!0}closeForm(){this.showForm=!1,this.templateForm.reset(),this.courseConfigs.clear()}get courseConfigs(){return this.templateForm.get("courseConfigs")}addCourseConfig(){this.courseConfigs.push(this.fb.group({courseId:["",a.required],questionCount:[1,[a.required,a.min(1)]],weight:[1,[a.required,a.min(.01)]]}))}removeCourseConfig(t){this.courseConfigs.removeAt(t)}isSelectedCourse(t){return this.courseConfigs.controls.some(e=>e.get("courseId")?.value===t)}saveTemplate(){return x(this,null,function*(){if(this.templateForm.invalid)return;let t=this.templateForm.value;this.editMode&&this.editingId?(yield this.examService.updateExamTemplate(this.editingId,t),this.closeForm()):(yield this.examService.createExamTemplate(t),this.closeForm())})}deleteTemplate(t){return x(this,null,function*(){(yield ce.default.fire({html:`<strong>${(yield this.examService.getExamTemplateById(t))?.name}</strong> \u015Fablonunu silmek istedi\u011Finizden emin misiniz?`,icon:"warning",confirmButtonText:"Evet",confirmButtonColor:"var(--primary-600)",showCancelButton:!0,cancelButtonText:"Hay\u0131r",cancelButtonColor:"var(--error-600)"})).isConfirmed&&this.examService.deleteExamTemplate(t)})}goBack(){window.history.back()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=w({type:o,selectors:[["edmin-exam-template"]],features:[P([te({heroXMark:ne})])],decls:6,vars:1,consts:[[1,"exam-template-container"],["title","S\u0131nav \u015Eablonu","subtitle","S\u0131nav \u015Fablonlar\u0131n\u0131 y\xF6netin, s\u0131navlar\u0131n\u0131z\u0131 bu \u015Fablonlardan olu\u015Fturabilirsiniz."],[1,"card-list"],[3,"template","viewMode"],["class","modal",4,"ngIf"],[3,"edit","delete","template","viewMode"],[1,"modal"],[1,"modal-content"],[3,"onClose","title"],[3,"ngSubmit","formGroup"],["appearance","fill",1,"full-width"],["matInput","","formControlName","name","placeholder","\u015Eablon ad\u0131n\u0131 giriniz"],["matInput","","formControlName","description","placeholder","\u015Eablon a\xE7\u0131klamas\u0131n\u0131 giriniz"],["matInput","","formControlName","version","placeholder","S\xFCr\xFCm numaras\u0131n\u0131 giriniz"],["formArrayName","courseConfigs",1,"course-config-container"],["class","course-config-row",3,"formGroupName",4,"ngFor","ngForOf"],["matButton","outlined","type","button",3,"click"],[3,"buttons"],[1,"course-config-row",3,"formGroupName"],["appearance","fill"],["formControlName","courseId"],[3,"value","disabled"],["matInput","","type","number","formControlName","questionCount","placeholder","Soru say\u0131s\u0131n\u0131 giriniz"],["matInput","","type","number","step","0.01","formControlName","weight","placeholder","Katsay\u0131 giriniz"],["mat-icon-button","","type","button",3,"click"],[1,"icon-danger"]],template:function(e,r){e&1&&(i(0,"div",0),u(1,"edmin-page-header",1),i(2,"div",2),F(3,fe,1,2,"edmin-exam-template-item",3,de),n(),M(5,xe,23,4,"div",4),n()),e&2&&(c(3),b(r.examTemplates()),c(2),d("ngIf",r.showForm))},dependencies:[j,V,I,B,N,k,q,G,z,A,S,T,O,U,Q,L,K,H,J,Y,ee,Z,W,X,R,$,le,ae,ie,oe],styles:[".exam-template-container[_ngcontent-%COMP%]{padding:2rem;max-width:1200px;margin:0 auto}.exam-template-container[_ngcontent-%COMP%]   .card-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1.5rem;padding:1.5rem;margin-top:1rem;align-self:center}.exam-template-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.exam-template-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background:var(--background-light, #fff);border-radius:8px;width:100%;max-width:600px;max-height:90vh;overflow-y:auto}.exam-template-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 1.5rem}.exam-template-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;padding:2rem}.exam-template-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%}.exam-template-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .course-config-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr 1fr auto;gap:1rem;align-items:center}.exam-template-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:1.5rem}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.course-config-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-bottom:1rem}@media (max-width: 768px){.exam-template-container[_ngcontent-%COMP%]{padding:16px}.card-list[_ngcontent-%COMP%]{gap:1rem}}@media (max-width: 600px){.modal-content[_ngcontent-%COMP%]{padding:1.2rem .5rem;min-width:90vw}.modal-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{gap:.7rem}}"]})};export{se as ExamTemplatePage};
