import{a as H}from"./chunk-SS4FSQ4D.js";import{a as C}from"./chunk-4GBD25LU.js";import{c as N}from"./chunk-5J2EYI5G.js";import"./chunk-5LCHCNSL.js";import{a as W}from"./chunk-5WLTLWZ3.js";import{a as M}from"./chunk-D6THCZXM.js";import"./chunk-VIEIPB32.js";import{a as z,b as L,c as V,d as B,i as R,l as G,p as K,r as j}from"./chunk-TWKM367Z.js";import{a as Y}from"./chunk-A45XJCY7.js";import{Oa as q,la as D,qa as A,sa as F,va as I}from"./chunk-D5KMJPJG.js";import{Ab as l,Bb as w,Oa as d,Qc as k,_a as p,a as _,b as P,cd as s,e as Q,f as m,ja as a,oa as O,pa as h,pb as b,pc as x,qb as v,rb as g,rc as S,sb as r,tb as c,ub as y,xd as T,yb as E,za as i}from"./chunk-C35VUVUC.js";var U=Q(W(),1);var ee=(o,e)=>e.id;function te(o,e){if(o&1){let t=E();r(0,"edmin-exam-template-item",3),l("click",function(){let f=O(t).$implicit,J=w();return h(J.selectTemplate(f))}),c()}if(o&2){let t=e.$implicit;g("template",t)("viewMode","show")}}var u=class o{examService=a(C);data=a(L);examTemplates=i([]);selectedTemplate=i(null);select=S();dialogRef=a(z);constructor(){x(()=>{this.examTemplates.set(this.examService.examTemplates())}),this.data&&this.data.selectedTemplate&&this.selectedTemplate.set(this.data.selectedTemplate)}selectTemplate(e){this.examService.getSelectedExam()?.templateId!==e.id&&(this.examService.getSelectedExam()&&this.examService.setSelectedExam(P(_({},this.examService.getSelectedExam()),{templateId:e.id})),this.selectedTemplate.set(e),this.select.emit(e),this.dialogRef.close(e))}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=p({type:o,selectors:[["edmin-exam-template-list"]],outputs:{select:"select"},decls:4,vars:0,consts:[["title","\u015Eablon Se\xE7","subtitle","Kullan\u0131lacak \u015Fablonu se\xE7iniz",3,"onClose"],[2,"display","flex","flex-direction","row","gap","1rem","flex-wrap","wrap","justify-content","center","margin","1rem auto"],[2,"cursor","pointer","display","block",3,"template","viewMode"],[2,"cursor","pointer","display","block",3,"click","template","viewMode"]],template:function(t,n){t&1&&(r(0,"edmin-modal-header",0),l("onClose",function(){return n.dialogRef.close()}),c(),r(1,"div",1),b(2,te,1,2,"edmin-exam-template-item",2,ee),c()),t&2&&(d(2),v(n.examTemplates()))},dependencies:[H,q],encapsulation:2})};var $=class o{opticalForm=null;isDragOver=!1;exams=i([]);editingExam;examTemplates=i([]);dialog=a(V);examService=a(C);constructor(){x(()=>{this.loadExams()})}loadExams(){return m(this,null,function*(){this.exams.set((yield this.examService.getExams())||[]),this.examTemplates.set((yield this.examService.getExamTemplates())||[]),this.setGridConfig()})}gridConfig;gridActions=[{type:"edit",icon:"heroPencilSquare",color:"primary",label:"D\xFCzenle",onClick:e=>this.editExam(e)},{type:"delete",icon:"heroTrash",color:"warn",label:"Sil",onClick:e=>this.deleteExam(e)}];modalConfig={title:"S\u0131nav Ekle",subtitle:"Yeni s\u0131nav bilgilerini girin",fields:[{key:"templateId",label:"\u015Eablon",type:"template",placeholder:"\u015Eablon Se\xE7",template:{component:u,displayExpr:"name",keyExpr:"id"}},{key:"name",label:"S\u0131nav Ad\u0131",type:"text",placeholder:"\xD6rn: Matematik Final S\u0131nav\u0131",required:!0,validators:[s.minLength(2),s.maxLength(50)]},{key:"code",label:"S\u0131nav Kodu",type:"text",placeholder:"\xD6rn: MAT2024-01",required:!0},{key:"date",label:"S\u0131nav Tarihi",type:"date",placeholder:"\xD6rn: 2024-01-01",required:!0,validators:[s.minLength(10),s.maxLength(10)]},{key:"durationInMinutes",label:"S\xFCre",type:"number",placeholder:"\xD6rn: 120",required:!0},{key:"answerKeyFileUrl",label:"Cevap Anahtar\u0131",type:"file",placeholder:"Cevap Anahtar\u0131 Se\xE7"}],submitText:"Kaydet",cancelText:"\u0130ptal",width:"500px"};setGridConfig(){this.gridConfig={title:"S\u0131navlar",subtitle:"S\u0131navlar\u0131 y\xF6netin",columns:[{key:"name",label:"S\u0131nav Ad\u0131",type:"text"},{key:"code",label:"S\u0131nav Kodu",type:"text"},{key:"date",label:"S\u0131nav Tarihi",type:"date"},{key:"durationInMinutes",label:"S\xFCre",type:"number"},{key:"templateId",label:"\u015Eablon",type:"template",data:this.examTemplates(),keyExpr:"id",displayExpr:"name"},{key:"answerKeyFileUrl",label:"Cevap Anahtar\u0131",type:"file"},{key:"isActive",label:"Aktif",type:"boolean"}],searchPlaceholder:"S\u0131nav ad\u0131na g\xF6re ara...",searchableColumns:["name","code"],addButtonText:"Yeni S\u0131nav Ekle",showAddButton:!0,showSearch:!0,maxHeight:"380px"}}editExam(e){return m(this,null,function*(){this.editingExam=e,this.modalConfig.title="S\u0131nav D\xFCzenle",this.modalConfig.subtitle="S\u0131nav bilgilerini d\xFCzenleyin",this.modalConfig.submitText="Kaydet",this.examService.setSelectedExam(e),this.assignFieldValues(),this.dialog.open(M,{width:this.modalConfig.width||"500px",data:{config:this.modalConfig}}).afterClosed().subscribe(n=>{n&&this.updateExam(n),this.examService.setSelectedExam(null)})})}onAddClick(){console.log("Adding exam"),this.modalConfig.title="Yeni S\u0131nav Ekle",this.modalConfig.subtitle="Yeni s\u0131nav bilgilerini girin",this.modalConfig.submitText="Ekle",this.examService.setSelectedExam({id:"",name:"",code:"",date:new Date,templateId:"",isActive:!0}),this.assignFieldValues(),this.dialog.open(M,{width:this.modalConfig.width||"500px",data:{config:this.modalConfig}}).afterClosed().subscribe(t=>{t&&this.createExam(t),this.examService.setSelectedExam(null)})}assignFieldValues(){return m(this,null,function*(){let e=yield this.examService.getExamTemplateById(this.examService.getSelectedExam()?.templateId||"");this.modalConfig.fields.forEach(t=>{t.value=this.examService.getSelectedExam()?.[t.key]||"",t.type==="template"&&t.template&&(e?(t.template.displayValue=e?.name||"",t.value=e.id):(t.template.displayValue="",t.value=""))})})}deleteExam(e){return m(this,null,function*(){if((yield U.default.fire({html:`<strong>${e.name}</strong> s\u0131nav\u0131n\u0131 silmek istedi\u011Finizden emin misiniz?`,icon:"warning",confirmButtonText:"Evet",confirmButtonColor:"var(--primary-600)",showCancelButton:!0,cancelButtonText:"Hay\u0131r",cancelButtonColor:"var(--error-600)"})).isConfirmed)try{yield this.examService.deleteExam(e.id)}catch(n){console.error("S\u0131nav silinirken hata olu\u015Ftu:",n)}})}createExam(e){try{this.examService.createExam(e)}catch(t){console.error("Error creating exam:",t)}}updateExam(e){if(this.editingExam)try{this.examService.updateExam(this.editingExam.id,e)}catch(t){console.error("Error updating exam:",t)}}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=p({type:o,selectors:[["app-exam"]],decls:3,vars:3,consts:[[1,"exam-create-container"],["title","S\u0131nav","subtitle","Var olan s\u0131navlar\u0131n\u0131z\u0131 y\xF6netin, yeni s\u0131navlar\u0131n\u0131z\u0131 olu\u015Fturabilirsiniz."],[3,"addClick","config","data","actions"]],template:function(t,n){t&1&&(r(0,"div",0),y(1,"edmin-page-header",1),r(2,"edmin-data-grid",2),l("addClick",function(){return n.onAddClick()}),c()()),t&2&&(d(2),g("config",n.gridConfig)("data",n.exams)("actions",n.gridActions))},dependencies:[k,T,G,D,A,I,F,K,R,B,j,N,Y],styles:[".exam-create-container[_ngcontent-%COMP%]{padding:2rem;max-width:1200px;margin:0 auto}.exam-create-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .exam-form-container[_ngcontent-%COMP%]{background-color:var(--background-light);border:1px solid var(--border-color);border-radius:12px;box-shadow:0 4px 20px #00000014}.exam-create-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .exam-form-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]{padding:1.5rem}.exam-create-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .exam-form-container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{margin-bottom:2rem}.exam-create-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .exam-form-container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.exam-create-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .exam-form-container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:500;color:var(--text-dark);margin:0 0 1rem}.exam-create-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .exam-form-container[_ngcontent-%COMP%]   .form-section.template-section[_ngcontent-%COMP%]   .template-select-btn[_ngcontent-%COMP%]{color:var(--primary-500)}.exam-create-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .exam-form-container[_ngcontent-%COMP%]   .form-section.exam-details[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem}.exam-create-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .exam-form-container[_ngcontent-%COMP%]   .form-section.file-upload-section[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]{border:2px dashed var(--primary-300);border-radius:8px;padding:2rem;text-align:center;cursor:pointer;transition:all .3s ease}.exam-create-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .exam-form-container[_ngcontent-%COMP%]   .form-section.file-upload-section[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]:hover, .exam-create-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .exam-form-container[_ngcontent-%COMP%]   .form-section.file-upload-section[_ngcontent-%COMP%]   .upload-container.drag-over[_ngcontent-%COMP%]{border-color:var(--primary-500);background-color:var(--primary-100)}.exam-create-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .exam-form-container[_ngcontent-%COMP%]   .form-section.file-upload-section[_ngcontent-%COMP%]   .upload-container.has-file[_ngcontent-%COMP%]{border-style:solid;border-color:var(--primary-500)}.exam-create-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .exam-form-container[_ngcontent-%COMP%]   .form-section.file-upload-section[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]{font-size:3rem;width:3rem;height:3rem;color:var(--primary-500);margin-bottom:1rem}.exam-create-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .exam-form-container[_ngcontent-%COMP%]   .form-section.file-upload-section[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]   .upload-content[_ngcontent-%COMP%]   .upload-title[_ngcontent-%COMP%]{display:block;font-size:1.1rem;font-weight:500;color:var(--text-dark);margin-bottom:.5rem}.exam-create-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .exam-form-container[_ngcontent-%COMP%]   .form-section.file-upload-section[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]   .upload-content[_ngcontent-%COMP%]   .upload-subtitle[_ngcontent-%COMP%]{display:block;color:var(--primary-400);margin-bottom:.5rem}.exam-create-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .exam-form-container[_ngcontent-%COMP%]   .form-section.file-upload-section[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]   .upload-content[_ngcontent-%COMP%]   .file-types[_ngcontent-%COMP%]{display:block;font-size:.875rem;color:var(--primary-400)}.exam-create-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .exam-form-container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;padding:1rem 1.5rem;margin:0;border-top:1px solid var(--border-color);background-color:var(--primary-100);border-bottom-left-radius:12px;border-bottom-right-radius:12px}.exam-create-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .exam-form-container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:120px;padding:.75rem 1.5rem;border-radius:8px;font-weight:500;display:flex;align-items:center;justify-content:center;gap:.5rem;cursor:pointer;transition:all .2s ease;border:none;outline:none}.exam-create-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .exam-form-container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.exam-create-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .exam-form-container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.exam-create-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .exam-form-container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{background-color:transparent;border:1px solid var(--border-color);color:var(--text-dark)}.exam-create-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .exam-form-container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--primary-100)}.exam-create-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .exam-form-container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]{background:var(--linear-primary);color:var(--text-light)}.exam-create-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .exam-form-container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--linear-primary-hover);transform:translateY(-1px);box-shadow:0 4px 12px #00000026}.exam-create-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .exam-form-container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]:disabled{background:var(--primary-300);color:var(--primary-400)}@media (max-width: 768px){.exam-create-container[_ngcontent-%COMP%], .exam-create-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .exam-form-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]{padding:1rem}.exam-create-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .exam-form-container[_ngcontent-%COMP%]   .form-section.exam-details[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.exam-create-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .exam-form-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{flex-direction:column-reverse;padding:1rem}.exam-create-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .exam-form-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}"]})};export{$ as ExamPage};
