import{c as k}from"./chunk-SSB4PXEL.js";import{c as A}from"./chunk-5J2EYI5G.js";import"./chunk-5LCHCNSL.js";import{a as I}from"./chunk-5WLTLWZ3.js";import{a as s}from"./chunk-D6THCZXM.js";import{a as E}from"./chunk-VIEIPB32.js";import{c as _,l as z}from"./chunk-TWKM367Z.js";import{a as B}from"./chunk-A45XJCY7.js";import{Ga as P,Ia as T,Ka as S,qa as v,sa as M,va as w,wa as x}from"./chunk-D5KMJPJG.js";import{Ab as g,Oa as d,Qc as D,Xb as h,_a as u,cd as a,e as R,f as r,ja as o,oc as p,pc as y,rb as c,sb as m,tb as f,ub as C,wd as b,za as n}from"./chunk-C35VUVUC.js";var G=R(I(),1);var F=class l{router=o(k);dialog=o(_);courseService=o(E);courses=n([]);searchTerm=n("");editingCourse=n(null);filteredCourses=p(()=>{let e=this.searchTerm(),i=this.courses();return e?i.filter(t=>t.name.toLowerCase().includes(e.toLowerCase())):i});gridConfig={title:"Dersler",subtitle:"Dersleri y\xF6netin (Matematik, Fizik, vb.)",columns:[{key:"name",label:"Ders Ad\u0131",type:"text"}],searchPlaceholder:"Ders ad\u0131na g\xF6re ara...",addButtonText:"Yeni Ders Ekle",showAddButton:!0,showSearch:!0,maxHeight:"380px",searchableColumns:["name"]};gridActions=[{type:"edit",icon:"heroPencilSquare",color:"primary",label:"D\xFCzenle",onClick:e=>this.editCourse(e)},{type:"delete",icon:"heroTrash",color:"warn",label:"Sil",onClick:e=>this.deleteCourse(e)}];modalConfig={title:"Ders Ekle",subtitle:"Yeni ders bilgilerini girin",fields:[{key:"name",label:"Ders Ad\u0131",type:"text",placeholder:"\xD6rn: Matematik, Fizik, Kimya",required:!0,validators:[a.minLength(2),a.maxLength(50)]}],submitText:"Kaydet",cancelText:"\u0130ptal",width:"500px"};constructor(){y(()=>{this.loadCourses()})}loadCourses(){return r(this,null,function*(){try{let e=yield this.courseService.getCourseList();this.courses.set(e||[])}catch(e){console.error("Dersler y\xFCklenirken hata olu\u015Ftu:",e),this.courses.set([])}})}onAddClick(){this.editingCourse.set(null),this.modalConfig.title="Yeni Ders Ekle",this.modalConfig.subtitle="Yeni ders bilgilerini girin",this.modalConfig.submitText="Ekle",this.modalConfig.fields.forEach(i=>{i.value=""}),this.dialog.open(s,{width:this.modalConfig.width||"500px",data:{config:this.modalConfig}}).afterClosed().subscribe(i=>{i&&this.addCourse(i)})}onSearchChange(e){this.searchTerm.set(e)}editCourse(e){this.editingCourse.set(e),this.modalConfig.title="Dersi D\xFCzenle",this.modalConfig.subtitle="Ders bilgilerini g\xFCncelleyin",this.modalConfig.submitText="G\xFCncelle",this.modalConfig.fields.forEach(t=>{t.value=e[t.key]}),this.dialog.open(s,{width:this.modalConfig.width||"500px",data:{config:this.modalConfig}}).afterClosed().subscribe(t=>{t&&this.updateCourse(t)})}addCourse(e){return r(this,null,function*(){try{yield this.courseService.createCourse(e)}catch(i){console.error("Ders eklenirken hata olu\u015Ftu:",i)}})}updateCourse(e){return r(this,null,function*(){let i=this.editingCourse();if(i)try{yield this.courseService.updateCourse(i.id,e),this.editingCourse.set(null)}catch(t){console.error("Ders g\xFCncellenirken hata olu\u015Ftu:",t)}})}deleteCourse(e){return r(this,null,function*(){if((yield G.default.fire({html:`<strong>${e.name}</strong> dersini silmek istedi\u011Finizden emin misiniz?`,icon:"warning",confirmButtonText:"Evet",confirmButtonColor:"var(--primary-600)",showCancelButton:!0,cancelButtonText:"Hay\u0131r",cancelButtonColor:"var(--error-600)"})).isConfirmed)try{yield this.courseService.deleteCourse(e.id)}catch(t){console.error("Ders silinirken hata olu\u015Ftu:",t)}})}goBack(){this.router.navigate(["/class-operations"])}static \u0275fac=function(i){return new(i||l)};static \u0275cmp=u({type:l,selectors:[["app-course-definition"]],features:[h([],[x({heroPlus:T,heroPencil:P,heroTrash:S})])],decls:2,vars:3,consts:[["title","Ders Tan\u0131mlama","subtitle","Derslerinizi y\xF6netin, kurumunuzun derslerinizi tan\u0131mlayabilirsiniz."],[3,"addClick","searchChange","config","data","actions"]],template:function(i,t){i&1&&(C(0,"edmin-page-header",0),m(1,"edmin-data-grid",1),g("addClick",function(){return t.onAddClick()})("searchChange",function(O){return t.onSearchChange(O)}),f()),i&2&&(d(),c("config",t.gridConfig)("data",t.filteredCourses)("actions",t.gridActions))},dependencies:[D,b,z,w,v,M,A,B],styles:["[_nghost-%COMP%]{display:block;padding:2rem;max-width:1200px;margin:0 auto}@media (max-width: 768px){.course-definition-container[_ngcontent-%COMP%]{padding:16px}.course-definition-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}}"]})};export{F as CourseDefinitionPage};
