<div class="modal-header">
  <div class="modal-title">
    <h2>{{ config.title }}</h2>
    <p *ngIf="config.subtitle" class="modal-subtitle">{{ config.subtitle }}</p>
  </div>
  <button mat-icon-button class="modal-close-button" (click)="onClose()">
    <ng-icon name="heroXMark"></ng-icon>
  </button>
</div>
<div class="modal-content">
  <form *ngIf="form" [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="form-fields">
      <div *ngFor="let field of config.fields" class="field-container">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>{{ field.label }}</mat-label>

          <!-- Text Input -->
          <input *ngIf="field.type === 'text' || field.type === 'email' || field.type === 'number'" matInput
            [formControlName]="field.key" [type]="field.type" [placeholder]="field.placeholder || field.label"
            [required]="field.required || false">

          <!-- Textarea -->
          <textarea *ngIf="field.type === 'textarea'" matInput [formControlName]="field.key"
            [placeholder]="field.placeholder || field.label" [required]="field.required || false"
            [rows]="field.rows || 3"></textarea>

          <!-- Select -->
          <mat-select *ngIf="field.type === 'select'" [formControlName]="field.key"
            [required]="field.required || false">
            <mat-option *ngFor="let option of field.options" [value]="option.value">
              {{ option.label }}
            </mat-option>
          </mat-select>

          <!-- Error Messages -->
          <mat-error *ngIf="isFieldInvalid(field.key)">
            {{ getFieldError(field.key) }}
          </mat-error>
        </mat-form-field>
      </div>
    </div>

    <div class="modal-actions">
      <button type="submit" mat-raised-button color="primary" [disabled]="form.invalid" class="submit-button">
        {{ config.submitText || 'Kaydet' }}
      </button>

      <button type="button" mat-button (click)="onCancel()" class="cancel-button">
        {{ config.cancelText || 'Ä°ptal' }}
      </button>

    </div>
  </form>
</div>